<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>多点标注</title>
    <link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css"/>
    <script src="https://webapi.amap.com/maps?v=1.3&key="></script>   <!--引入高德地图api，key为你自己获取的key值-->
    <script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
    <style>
        .amap-logo{
            display: none;    /*隐藏左下角地图logo*/
        }
        .amap-copyright{
            display: none!important;
        }
    </style>

    <style>
	.amap-marker-label {
    position: absolute;
    z-index: 2;
    border: 1px solid #0000ff2e;
    background-color: #ffffffd4;
    white-space: nowrap;
    cursor: default;
    padding: 3px;
    font-size: 14px;
    line-height: 14px;
    color: black;
    }
    </style>
    
</head>
<body>
<div id="container" style="width:100%;height:100%"></div>
<div id="tip"></div>
<script type="text/javascript" src="1.js"></script>
<script>
    var map = new AMap.Map('container', {});
    map.plugin(["AMap.ToolBar"], function() {
        map.addControl(new AMap.ToolBar());
    });
    var infoWindow = new AMap.InfoWindow({});     //创建信息窗口对象  ps.高德目前不支持多信息窗口，即使创建多个窗口对象，也只会显示一个
//1.js
   
    for(var i= 0;i<data.length;i++){
        var marker=new AMap.Marker({
            position:data[i].center.split(','),        //采用默认样式，无需自定义
	    title: data[i].name,//鼠标移入显示停车场的名称 
            map:map,
	    index: data[i].index,
		
//	icon: new AMap.Icon({
//		size: new AMap.Size(40, 50),  //图标大小
//            	image: "http://lbs.qq.com/doc_v2/img/nilt.png",
//            	imageOffset: new AMap.Pixel(0, 0)
//		})
	    
        });
	
        content = [];
	content.push('点击'+'<a href="'+data[i].url+'">详情</a>');
//        content.push('ID：'+data[i].index);
        content.push('地址：'+data[i].address);
	content.push('电话:'+'<a href="tel:'+data[i].tel+'">'+data[i].tel+'</a>');
	content.push('地址：'+'<a href="javascript: marker.on(openAmap);map.setFitView();function openAmap(e){e.target.markOnAMAP({name:e.target.title,position:e.target.getPosition()})}">999881</a>');
	marker.content = content;
        marker.title = data[i].index+"."+data[i].name;     //标记点的title

	marker.setLabel({
		        offset: new AMap.Pixel(15, 15),
		        content: data[i].name
	});

//        if(data[i].id==2){              //默认打开第二个点的信息窗口
  //      infoWindow.setContent(content.join("<br/>"));
    //    infoWindow.open(map,lnglats[i]);
      //  }

        marker.on('dblclick',openAmap);     //这里采用调到新页面方式导航，也可直接定义带导航功能的信息窗体，请参考http://lbs.amap.com/api/javascript-api/example/infowindow/infowindow-has-search-function/
        //给Marker绑定单击事件
        marker.on('click', markerClick);
    }

    map.setFitView();
    //跳至地图当中导航
    function openAmap(e){
        e.target.markOnAMAP({
            name:e.target.title,
            position:e.target.getPosition()
        })
    }
    //信息窗口
    function markerClick(e){
        infoWindow.setContent(e.target.content.join('<br/>'));
        infoWindow.open(map, e.target.getPosition());
    }

    //地图加载完成事件
    map.on('complete', function() {
        Materialize.toast('地图图块加载完毕！', 4000)
//        document.getElementById('tip').innerHTML = "地图图块加载完毕！当前地图中心点为：" + data[0].name;
    });
</script>
</body>
</html>
